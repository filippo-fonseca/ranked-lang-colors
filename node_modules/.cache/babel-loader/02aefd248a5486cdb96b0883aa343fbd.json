{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport useTheme from '../use-theme';\nimport ImageSkeleton from './image.skeleton';\nimport useRealShape from '../utils/use-real-shape';\nimport useCurrentState from '../utils/use-current-state';\nimport useResize from '../utils/use-resize';\nvar defaultProps = {\n  disableSkeleton: false,\n  disableAutoResize: false,\n  className: '',\n  scale: '100%',\n  maxDelay: 3000\n};\n\nvar Image = function Image(_ref) {\n  var src = _ref.src,\n      width = _ref.width,\n      height = _ref.height,\n      disableSkeleton = _ref.disableSkeleton,\n      className = _ref.className,\n      scale = _ref.scale,\n      maxDelay = _ref.maxDelay,\n      disableAutoResize = _ref.disableAutoResize,\n      props = _objectWithoutProperties(_ref, [\"src\", \"width\", \"height\", \"disableSkeleton\", \"className\", \"scale\", \"maxDelay\", \"disableAutoResize\"]);\n\n  var showAnimation = !disableSkeleton && width && height;\n  var w = width ? \"\".concat(width, \"px\") : 'auto';\n  var h = height ? \"\".concat(height, \"px\") : 'auto';\n  var theme = useTheme();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showSkeleton = _useState4[0],\n      setShowSkeleton = _useState4[1];\n\n  var _useCurrentState = useCurrentState(h),\n      _useCurrentState2 = _slicedToArray(_useCurrentState, 3),\n      zoomHeight = _useCurrentState2[0],\n      setZoomHeight = _useCurrentState2[1],\n      zoomHeightRef = _useCurrentState2[2];\n\n  var imageRef = useRef(null);\n\n  var _useRealShape = useRealShape(imageRef),\n      _useRealShape2 = _slicedToArray(_useRealShape, 2),\n      shape = _useRealShape2[0],\n      updateShape = _useRealShape2[1];\n\n  var imageLoaded = function imageLoaded() {\n    if (!showAnimation) return;\n    setLoading(false);\n  };\n\n  useEffect(function () {\n    if (!showAnimation) return;\n    if (!imageRef.current) return;\n\n    if (imageRef.current.complete) {\n      setLoading(false);\n      setShowSkeleton(false);\n    }\n  });\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      if (showAnimation) {\n        setShowSkeleton(false);\n      }\n\n      clearTimeout(timer);\n    }, maxDelay);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [loading]);\n  /**\n   * On mobile devices, the render witdth may be less than CSS width value.\n   * If the image is scaled, set the height manually.\n   * This is to ensure the aspect ratio of the image.\n   *\n   * If the image is auto width, ignore all.\n   */\n\n  useEffect(function () {\n    if (disableAutoResize) return;\n    var notLoaded = shape.width === 0;\n    var isAutoZoom = zoomHeightRef.current === 'auto';\n    if (notLoaded || !width || !height) return;\n\n    if (shape.width < width) {\n      !isAutoZoom && setZoomHeight('auto');\n    } else {\n      isAutoZoom && setZoomHeight(h);\n    }\n  }, [shape, width]);\n  useResize(function () {\n    if (disableAutoResize) return;\n    updateShape();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: _JSXStyle.dynamic([[\"3152964456\", [w, zoomHeight, theme.layout.radius, scale, scale]]]) + \" \" + \"image \".concat(className)\n  }, showSkeleton && showAnimation && /*#__PURE__*/React.createElement(ImageSkeleton, {\n    opacity: loading ? 0.5 : 0\n  }), /*#__PURE__*/React.createElement(\"img\", _extends({\n    ref: imageRef,\n    width: width,\n    height: height,\n    onLoad: imageLoaded,\n    src: src\n  }, props, {\n    className: _JSXStyle.dynamic([[\"3152964456\", [w, zoomHeight, theme.layout.radius, scale, scale]]]) + \" \" + (props && props.className != null && props.className || \"\")\n  })), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3152964456\",\n    dynamic: [w, zoomHeight, theme.layout.radius, scale, scale]\n  }, \".image.__jsx-style-dynamic-selector{width:\".concat(w, \";height:\").concat(zoomHeight, \";margin:0 auto;position:relative;border-radius:\").concat(theme.layout.radius, \";overflow:hidden;max-width:100%;}img.__jsx-style-dynamic-selector{width:\").concat(scale, \";height:\").concat(scale, \";object-fit:scale-down;display:block;}\")));\n};\n\nImage.defaultProps = defaultProps;\nexport default /*#__PURE__*/React.memo(Image);","map":{"version":3,"sources":["/Users/filippofonseca/Developer/open-source/ranked-lang-colors/core-l/node_modules/@geist-ui/react/esm/image/image.js"],"names":["_extends","_slicedToArray","_objectWithoutProperties","_JSXStyle","React","useEffect","useRef","useState","useTheme","ImageSkeleton","useRealShape","useCurrentState","useResize","defaultProps","disableSkeleton","disableAutoResize","className","scale","maxDelay","Image","_ref","src","width","height","props","showAnimation","w","concat","h","theme","_useState","_useState2","loading","setLoading","_useState3","_useState4","showSkeleton","setShowSkeleton","_useCurrentState","_useCurrentState2","zoomHeight","setZoomHeight","zoomHeightRef","imageRef","_useRealShape","_useRealShape2","shape","updateShape","imageLoaded","current","complete","timer","setTimeout","clearTimeout","notLoaded","isAutoZoom","createElement","dynamic","layout","radius","opacity","ref","onLoad","id","memo"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport useTheme from '../use-theme';\nimport ImageSkeleton from './image.skeleton';\nimport useRealShape from '../utils/use-real-shape';\nimport useCurrentState from '../utils/use-current-state';\nimport useResize from '../utils/use-resize';\nvar defaultProps = {\n  disableSkeleton: false,\n  disableAutoResize: false,\n  className: '',\n  scale: '100%',\n  maxDelay: 3000\n};\n\nvar Image = function Image(_ref) {\n  var src = _ref.src,\n      width = _ref.width,\n      height = _ref.height,\n      disableSkeleton = _ref.disableSkeleton,\n      className = _ref.className,\n      scale = _ref.scale,\n      maxDelay = _ref.maxDelay,\n      disableAutoResize = _ref.disableAutoResize,\n      props = _objectWithoutProperties(_ref, [\"src\", \"width\", \"height\", \"disableSkeleton\", \"className\", \"scale\", \"maxDelay\", \"disableAutoResize\"]);\n\n  var showAnimation = !disableSkeleton && width && height;\n  var w = width ? \"\".concat(width, \"px\") : 'auto';\n  var h = height ? \"\".concat(height, \"px\") : 'auto';\n  var theme = useTheme();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showSkeleton = _useState4[0],\n      setShowSkeleton = _useState4[1];\n\n  var _useCurrentState = useCurrentState(h),\n      _useCurrentState2 = _slicedToArray(_useCurrentState, 3),\n      zoomHeight = _useCurrentState2[0],\n      setZoomHeight = _useCurrentState2[1],\n      zoomHeightRef = _useCurrentState2[2];\n\n  var imageRef = useRef(null);\n\n  var _useRealShape = useRealShape(imageRef),\n      _useRealShape2 = _slicedToArray(_useRealShape, 2),\n      shape = _useRealShape2[0],\n      updateShape = _useRealShape2[1];\n\n  var imageLoaded = function imageLoaded() {\n    if (!showAnimation) return;\n    setLoading(false);\n  };\n\n  useEffect(function () {\n    if (!showAnimation) return;\n    if (!imageRef.current) return;\n\n    if (imageRef.current.complete) {\n      setLoading(false);\n      setShowSkeleton(false);\n    }\n  });\n  useEffect(function () {\n    var timer = setTimeout(function () {\n      if (showAnimation) {\n        setShowSkeleton(false);\n      }\n\n      clearTimeout(timer);\n    }, maxDelay);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [loading]);\n  /**\n   * On mobile devices, the render witdth may be less than CSS width value.\n   * If the image is scaled, set the height manually.\n   * This is to ensure the aspect ratio of the image.\n   *\n   * If the image is auto width, ignore all.\n   */\n\n  useEffect(function () {\n    if (disableAutoResize) return;\n    var notLoaded = shape.width === 0;\n    var isAutoZoom = zoomHeightRef.current === 'auto';\n    if (notLoaded || !width || !height) return;\n\n    if (shape.width < width) {\n      !isAutoZoom && setZoomHeight('auto');\n    } else {\n      isAutoZoom && setZoomHeight(h);\n    }\n  }, [shape, width]);\n  useResize(function () {\n    if (disableAutoResize) return;\n    updateShape();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: _JSXStyle.dynamic([[\"3152964456\", [w, zoomHeight, theme.layout.radius, scale, scale]]]) + \" \" + \"image \".concat(className)\n  }, showSkeleton && showAnimation && /*#__PURE__*/React.createElement(ImageSkeleton, {\n    opacity: loading ? 0.5 : 0\n  }), /*#__PURE__*/React.createElement(\"img\", _extends({\n    ref: imageRef,\n    width: width,\n    height: height,\n    onLoad: imageLoaded,\n    src: src\n  }, props, {\n    className: _JSXStyle.dynamic([[\"3152964456\", [w, zoomHeight, theme.layout.radius, scale, scale]]]) + \" \" + (props && props.className != null && props.className || \"\")\n  })), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3152964456\",\n    dynamic: [w, zoomHeight, theme.layout.radius, scale, scale]\n  }, \".image.__jsx-style-dynamic-selector{width:\".concat(w, \";height:\").concat(zoomHeight, \";margin:0 auto;position:relative;border-radius:\").concat(theme.layout.radius, \";overflow:hidden;max-width:100%;}img.__jsx-style-dynamic-selector{width:\").concat(scale, \";height:\").concat(scale, \";object-fit:scale-down;display:block;}\")));\n};\n\nImage.defaultProps = defaultProps;\nexport default /*#__PURE__*/React.memo(Image);"]},"metadata":{},"sourceType":"module"}